<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Ranga Jewellers</title>
    <link rel="icon" sizes="192x192" href="images/favilogo.png" />
    <link rel="apple-touch-icon" href="images/favilogo.png" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Titillium+Web:400,300,600"
      rel="stylesheet"
      type="text/css"
    />
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css" integrity="sha384-vp86vTRFVJgpjF9jiIGPEEqYqlDwgyBgEF109VFjmqGmIY/Y4HV4d3Gp2irVfcrp" crossorigin="anonymous">

    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, shrink-to-fit=no"
    />
    {% load static %}

    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Helvetica:Light|Arial|Poppins:Light|Raleway|Montserrat"
    />
    <link rel="stylesheet" type="text/css" href="{% static 'styles/w3.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'styles/profile.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'styles/animate.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'fontawesome/css/all.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'styles/common.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'styles/index.css' %}" />
    <style>
     {% load static %}
        body {
  
  margin: 0;
  background: url("{% static 'images/shop.jpg' %}");
    background-position: center;
    background-size: 40%;
}
      .imgc {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        overflow: hidden;
        position: relative;
      }
      
      .imgc img{
        width: 100px;
        height: 120px;
        position: absolute !important;   
        left: -19px;     
      }    
      .container .imgContainer{
        border: 1px solid #121212;
        border-radius: 10px;
        width: 165px;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 240px;
        position: relative;
        overflow: hidden;
      }
      .container .imgContainer img{
        width: 160px;
        height: 300px;
        object-fit: contain;
      }
      .container .fa-solid{
        position: absolute;
        top: 70%;
        left: 40%;
      }
      #uplImg{
        display: none;
      }
      input[type=radio]{
        width: 60px;
      }
    </style>
  </head>
  <body>
    <div
      id="goTopBtn"
      onclick="gotoTop();return false;"
      class="animated faster"
    >
      <i class="fas fa-angle-up"></i>
    </div>
    <div class="nav-bar">
      <div class="row">
        <div class="options">
          <i
          class="fas fa-bars"
          id="bars"
          onclick="dropDownMenuControl();return false;"
        ></i>
        </div>
        <div class="logo">
          <img
            src="{% static '/images/logo_final.jpg' %}"
            onclick="window.location='/home';"
          />
        </div>
        <div class="menu">
          <p>
            <a href="/home">Home</a>
          </p>
          <p>
            <a href="/jewels">Shop</a>
          </p>
          <p><a href="/collections">Collections</a></p>
          <p><a href="/about">About</a></p>
          <p><a href="/contact">Contact</a></p>
          {% if status %}
          <p><a href="{% url 'logout' %}">Logout</a></p>
          <p><a href="{% url 'profile' %}"><b>Profile</b></a></p>
          <p><a href="{% url 'orderHistory' %}">My Orders</a></p>
          <p><a href="{% url 'cart' %}" ><i class="fas fa-shopping-bag" ></i></a></p>
          {% else %}
          <p><a href="{% url 'login' %}">Login/Signup</a></p>
          {% endif %}
        </div>
        
        <div class="options">
          {% if img %}
          <div class="imgc">
            <a href="{% url 'profile' %}">
              <img src="{{ img }}"
            /></a>
          </div>
          {% else %}
          <a  href="#"><i class="far fa-user-circle" id="user"></i></a>
          {% endif %}

          
          
        </div>
      </div>
    </div>

    <div class="dropdown animated fast">
      <a class="nav-links" href="/home"><i class="fas fa-home"></i> Home</a>
      <a class="nav-links" href="/jewels"
        ><i class="fas fa-shopping-bag"></i> Shop</a
      >
      <a class="nav-links" href="/collections"><i class="fas fa-image"></i> Collections</a>
      <a class="nav-links" href="/about"><i class="fas fa-info"></i> About</a>
      <a class="nav-links" href="/contact"><i class="fas fa-phone"></i> Contact</a>
      {% if status %}
          <p><a class="nav-links" href="{% url 'logout' %}" ><i class="fas fa-sign-out-alt"></i>Logout</a></p>
          <p><a class="nav-links" href="{% url 'profile' %}"><i class="fas fa-user-circle"></i><b>Profile</b></a></p>
          <p><a class="nav-links" href="{% url 'orderHistory' %}"><i class="fas fa-user-circle"></i>My Orders</a></p>
          <p><a href="{% url 'cart' %}" ><i class="fas fa-shopping-bag" ></i></a></p>
          {% else %}
          <p><a class="nav-links" href="{% url 'login' %}"><i class="fas fa-sign-in-alt"></i>Login/Signup</a></p>
      {% endif %}
    </div>

<br><br><br><br><br>


  
        <form class="container" style="width:50% ;" method="post" action="/profile/">
          {% csrf_token %}
          <h1 style="text-align: center;">Edit Profile</h1>
         
          <hr>
          <div class="imgContainer">
            <img src="{{ img }}" id="userUpdImg" width="150px" height="150px" referrerpolicy="no-referrer">
            <label class="label-img" for="uplImg"><input accept="image/*" type="file" name="uplImg" id="uplImg" class="uplImg"><i class="fa-solid fa-3x fa-plus"></i> </label>
          </div>
          <input type="hidden" name="url" id="url">
          <label for="name"><b>Full Name</b></label>
          <input type="text" value="{{ account_info.fname }}" name="name"  placeholder="full name" readonly>

         
            <label for="gender"><b>Gender</b></label><br><br>
            {% if account_info.gender == "" %} 
              <label for="male">Male</label>
              <input type="radio" name="gender" id="male" name="gender" value="male" checked>
              <label for="female">Female</label>
              <input type="radio" name="gender" id="female" name="gender" value="female" >
            {% endif %}
              {% if account_info.gender == "male" %}
              <label for="male">Male</label>
              <input type="radio" name="gender" id="male" name="gender" value="male" checked>
              <label for="female">Female</label>
              <input type="radio" name="gender" id="female" name="gender" value="female" >
              {% endif %}
             
              {% if account_info.gender == "female" %}
              <label for="male">Male</label>
              <input type="radio" name="gender" id="male" name="gender" value="male" checked>
              <label for="female">Female</label>
              <input type="radio" name="gender" id="female" name="gender" value="female" checked>
              {% endif %}
              
            <br>

          <label for="dob"><b>D.O.B</b></label>&emsp14;&emsp14;&emsp14;&emsp14;&emsp14;&emsp14;&emsp14;&emsp14;
          <input type="date" value="{{ account_info.dob }}" placeholder="DOB" id="dob" name="dob" required><br><br>
    
          <label for="email"><b>Email</b></label>
          <input type="text" value="{{ account_info.email }}" name="email" >
    
          <label for="address"><b>Address</b></label>
          <input type="text" value="{{ account_info.address }}" placeholder="Address" name="address"  style="height: 120px;" required>
    
          <!-- <label for="img"><b>Select image</b></label>
          <input type="file" id="img" name="img" accept="image/*"> -->
          
          <br><br>
    
          <div class="clearfix">
     
            <button type="submit" class="signupbtn" style="align-items:center;align-content:center;justify-items:center;">Save</button>
          </div>
        </div>
      </form>

    
    <script>
    // Get the modal
    var modal = document.getElementById('id01');
    
    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }
    // var fileTag = document.getElementById("uplImg"),
    // preview = document.getElementById("userUpdImg");
    
    // fileTag.addEventListener("change", function() {
    //   changeImage(this);
    // });

    // function changeImage(input) {
    //   var reader;

    //   if (input.files && input.files[0]) {
    //     reader = new FileReader();

    //     reader.onload = function(e) {
    //       preview.setAttribute('src', e.target.result);
    //     }

    //     reader.readAsDataURL(input.files[0]);
    //   }
    // }
    const file = document.getElementById("uplImg")
      const userImg = document.getElementById("userUpdImg")
      file.addEventListener("change", ev => {
        const fileSize = ev.target.files[0].size / 1024 / 1024;
        if (fileSize > 5) {
          alert('File size exceeds 5 MiB');
          return false;
        } 
          const formdata = new FormData()
          formdata.append("image", ev.target.files[0])
          fetch("https://api.imgur.com/3/image/", {
              method: "post",
              headers: {
                  Authorization: "Client-ID 6c4533e9356e4e7"
              },
              body: formdata
          }).then(data => data.json()).then(data => {
              userImg.src = data.data.link;
              document.getElementById("url").value = data.data.link;
              // alert("Uploaded, Wait for some time and submit")
          })
      })
    </script>

<script src="{% static 'js/carousel.js' %}"></script>
<script src="{% static 'js/app.js' %}"></script>
  </body>
</html>
